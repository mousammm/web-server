# Day 3 

OUR server listens for incomming connection 
Client(browser) -> http://localhost:8080/index.html
- browser send a req 
- we can accept it in buffer from clientFile descriptor

	GET /example.txt HTTP/1.1  //Method, Path, Http Version
	Host: localhost:8000
	User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36
	Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
	Accept-Language: en-US,en;q=0.5
	Accept-Encoding: gzip, deflate
	Connection: keep-alive

Now after getting the request in buffer 
we need to send a response

	HTTP/1.1 200 OK
	Content-Type: text/plain
	Content-Length: 27
	Connection: close
	
	This is the file content!


What browser can send is pre defined
        text/plain → Show as plain text
        text/html → Render as HTML webpage
        image/png → Display as image
        application/json → Show formatted JSON
	application/octet-stream -> Downloads as file

------------------------------------------------------------------------------

- if browser know that client want index.html 
- then how come we need to defined the contentt type in response
ANS:  its for the browser convinence so it can do the things it suppose to do
      with the the content like rendering as img html json etc

CODE:

- refactoring
- remove all http function from Server.c to Http.c
- Same for Client fun 

SRC AFTER:
src/
├── http
│   ├── Client.c
│   ├── Http.c
│   ├── Server.c
│   └── Server.h
└── main.c


OVERVIEV:
Server.c
	server_create(): set up ipv4 
	server_start(): bind and listen (Now that i think we can do in one fun ahh!..)
	server_stop(): is_running = 0 > used be accept to see if server is running

Client.c ->
	client_accept_client(): 
		check is_running 
	 	accept then  fill client info (port/ip/timestamp)
	client_logs(): log client ip time port
	client_handle_request():
		client_logs()
		client http header put in <buffer>
		extract 
			Method/Path/HttpVersion
			user_agent/host
			content_type   // empty im get req
			content_lenght // 0 in get req 
	routing: from the path send a http response
			
Http.c ->	
	http_parse_request():
		get the <buffer> (same one defined in client_handle_request())
		parse: method path version and all the things
	http_send_response():
		send response with the info like 
			http Version/Content type/Content-Length
			NOTE: Content types is not the same that we have got from client_handle_request() (come on get req have NULL value )
			NOTE: Content length is also not the same but the length of the file/text/etc we are sending (Yeah this part was too confusing!)

SOME IMPROVMENT Server.c
merge server_start() code in server_create()
- now server_create()
	- set network configuration 
	- bind > listen 

TODOS: for day4

#1 client_handle_request() does:
- create a routing file that does routing 
- some helper function to serve text/json/file/errors

