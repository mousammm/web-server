# req to res

```c
char* f = buffer + 5;
*strchr(f, ' ') = 0;
```

* currently we only extract path form ( GET /path HTTP/1.1)
* our goal we be to change this to a fun that store all 3 in a struct

```c
typedef struct {
    char method[16];
    char path[256];
    char version[16];
} Req_t;
```
```c
Req_t req = {0};         // local
char buffer[1024] = {0}; // gloal var 

while(;;){
    .....
    memset(buffer, 0, sizeof(buffer));  // Reset buffer for new request
    parse_req(client_fd, &req);         // path req and save in Req_t 
    .....
}
```

# int parse_req(int client_fd, Req_t* req)

```c
// read request 
int bytes_read = recv(client_fd, buffer, sizeof(buffer) - 1, 0);
if(bytes_read <= 0) return -1;
buffer[bytes_read] = '\0';

// Parse method, path, and version
char *saveptr;
char *line = strtok_r(buffer, "\r\n", &saveptr);
if (line == NULL) return -1;

// parse first line: GET /path HTTP/1.1
char *method  = strtok(line, " ");
char *path    = strtok(NULL, " ");
char *version = strtok(NULL, " ");

// Copy to struct (safe bounds-checked)
strncpy(req->method, method, sizeof(req->method) - 1);
req->method[sizeof(req->method) - 1] = '\0';

strncpy(req->path, path, sizeof(req->path) - 1);
req->path[sizeof(req->path) - 1] = '\0';

strncpy(req->version, version, sizeof(req->version) - 1);
req->version[sizeof(req->version) - 1] = '\0';

return 0;
```

# sending req

```c
char *res = 
    "HTTP/1.1 200 OK\r\n"
    "Content-Type: text/html\r\n"
    "Content-Length: 13\r\n"
    "\r\n"
    "Hello, World!";

send(client_fd, res, strlen(res), 0);
```

* now we have to make it in a fun 
* and used the Req_t to fill it values dynamically

```c
void send_res(int client_fd, Req_t* req)
{
    char res[1024] = 
        "HTTP/1.1 200 OK\r\n"
        "Content-Type: text/html\r\n"
        "Content-Length: 13\r\n"
        "\r\n"
        "Hello, World!";

    send(client_fd, res, strlen(res), 0);
}
```

* ok it goot for now we have replace it 
* but its not complete 
* like the content type now how do we get it 
* here we need MIME type or get it through file extension
